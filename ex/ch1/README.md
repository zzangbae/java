## Ch1. 자바 배경지식

#### 1. 자바의 특징

1. 운영체제에 독립적이다.

   * 자바 응용프로그램은 JVM과 통신
   * 자바 응용프로그램으로부터 전달받은 명령을 운영체제가 이해할 수 있도록 변환하여 전달
   * JVM 자체는 운영체제에 종속적이라, 서로 다른 버전의 JVM을 사용해야함
   * 자바 프로그램 자체는 운영체제에 독립적 -> Write once, run everywhere.

2. 객체지향언어

   * 상속, 캡슐화, 다형성이 잘 적용된 순수한 객체지향 언어 -> ch6에 자세히 정리

3. 자동 메모리 관리(Garbage Collector)

   * 더이상 쓰지 않는 메모리 영역을 반환하도록 함. 자동으로.

   * 개발자가 프로그래밍에 집중할 수 있도록 함

   * 예시)

     ```JAVA
     // A라는 클래스가 있다고 가정
     A a = new A();
     A b = new A();
     a = b;
     ```

     * a라는 변수에 A의 인스턴스가 들어있고, 또 다른 객체가 b라는 변수에 들어있다.(주소)
     * a = b; 를 통해서 기존에 a가 가리키던 객체는 더이상 활용되지 않는다.
     * 이 때, 더이상 활용되지 않는 객체를 Garbage Collector가 메모리를 수거해가서 반환하는 것

4. 네트워크와 분산처리

   * 인터넷과 대규모 분산환경을 염두에 둠
   * 네트워크 프로그래밍 라이브러리(Java API)를 통해 비교적 짧은 시간에 네트워크 관련 프로그램을 쉽게 개발할 수 있도록 지원

5. 멀티쓰레드 지원 -> ch13에서 자세히 정리할 예정

   * 멀티쓰레드 지원은 사용되는 운영체제에 따라 구현방법도 상이하고, 처리방식도 다름
   * 자바에서 개발되는 멀티쓰레드 프로그램은 시스템 관계없이 구현 가능
   * Java API 라이브러리에서 제공
   * 여러 쓰레드에 대한 스케줄링(Scheduling)을 자바 인터프리터가 담당

6. 동적로딩(Dynamic Loading) 지원

   * 자바 애플리케이션 -> 클래스로 이루어짐
   * 실행시, 모든 클래스를 로딩하는 것이 아니라, 필요한 시점에 클래스를 로딩하여 사용할 수 있음
   * 일부 클래스가 변경되어도 전체 애플리케이션을 다시 컴파일 하지 않아도 됨

* 추가적으로 Java는 java소스코드 -> 바이트코드(클래스 코드) -> 기계어로의 번역을 거치게된다.
* 일반적으로는 소스코드 -> 기계어 번역을 거친다.



#### 2. JVM(Java Virtual Machine)

* Java Virtual Machine : 자바를 실행하기 위한 기계(컴퓨터)

* JVM의 레이어드 차이를 확인하자

  * Java Application - JVM - 운영체제 - 컴퓨터(HW)
  * 일반 Application - 운영체제 - 컴퓨터(HW)

  ---> 자바 개발자는 자바 애플리케이션에만 집중할 수 있음. 운영체제와의 호환성은 JVM이 맡아서 해줄 것

  

#### cf) Garbage Collector

1. 참조추적(Reference Tracing) : 어떤 객체가 사용 중인지, 루트(스택프레임 정적 변수)에서 부터 시작하여 모든 객체들의 참조사슬을 따라감
2. 도달 가능한 객체 식별 - 도달 불가능한 객체는 가비지에 넘김
3. 가비지 수거, 메모리 해제
4. 메모리 조각화 방지

* GC 알고리즘
  * Serial GC
  * CMS GC
  * Paralled GC
  * GI GC



#### 3. JDK(Java Development Kit)

* JDK = JVM + Java API(라이브러리) + 개발에 필요한 실행파일

* JRE : 자바 개발 환경(Java Runtime Environment)

  * 자바로 작성된 응용프로그램이 실행되기 위한 최소 환경
  * 따라서 JDK = JRE + 개발에 필요한 실행파일

* JDK의 bin 디렉토리에 있는 주요 실행파일들

  * javac.exe : 자바 컴파일러(자바 소스코드 -> 바이트 코드)
    * 바이트코드 : JVM이 이해할 수 있는 언어. JVM은 바이트코드를 해당 OS의 기계어로 번역하여 OS에 전달(.class)
  * java.exe : 자바 인터프리터(컴파일러가 생성한 바이트 코드를 해석하고 실행)
  * javap.exe : 역어셈블러(컴파일된 클래스파일을 원래의 소스로 변환)
  * javadoc.exe : 자동문서 생성기 JavaAPI문서와 같은 형식의 문서를 자동으로 생성
  * jar.exe : 압축프로그램. 클래스파일과 프로그램의 실행에 관련된 파일을 하나의 jar파일(.jar)로 압축하거나 압축 해제함

* Java 소스코드의 실행과정

  1. 개발자가 소스코드 작성 `.java`

  2. 컴파일: JDK안에 `javac.exe`가 컴파일을 컴파일을 진행(`.java` --> `.class`)
     * 소스코드를 검사
     * 구문 요류 없으면 바이트코드(클래스파일)로 변환
  3. 클래스 로딩(동적 로딩)
     * 런타임에서 필요한 클래스를 찾고
     * JVM 메모리 영역에 배치. 의존성 해결 -> 메모리 영역은 더 자세히 정리할 예정
  4. 바이트 코드 검증 - 보안상 이유
  5. JVM이 바이트 코드를 OS에 맞게 기계어로 번역하고 OS를 통해 CPU실행
     * `java.exe`가 인터프리터로서 역할
     * JIT컴파일러를 통해서 실행속도가 개선됨(바이트코드 to 기계어)
  6. 가비지 컬렉션 : 안쓰는 메모리 영역을 반환 - 실행엔진의 일부로 백그라운드에서 비동기적으로 진행
  7. 프로그램의 실행 및 종료